# ==============================================================================
# WINDOW RULES
# ==============================================================================

dwindle {
    pseudotile = true
    preserve_split = true
}

# --- Terminal Opacity ---
windowrule = match:class kitty, opacity 0.85 override 0.85 override
windowrule = match:class Alacritty, opacity 0.85 override 0.85 override

# --- Utility Windows ---
windowrule = match:class pavucontrol, float on
windowrule = match:class pavucontrol, center on
windowrule = match:class nm-connection-editor, float on

# --- Named Rule: Picture-in-Picture ---
windowrule {
    name = picture-in-picture
    match:title = ^Picture-in-Picture$
    float = on
    pin = on
}

# --- SMART GAPS (v2 Architecture) ---
# This rule ONLY triggers when a workspace has exactly ONE tiled window.
# It removes the gaps to maximize screen space.
workspace = w, gapsout:0, gapsin:0

# IMPORTANT: To keep rounding and gradients visible even when a window is alone, 
# we DO NOT set border_size or rounding to 0 here. 
# If you want it completely flush, uncomment the lines below:
# windowrule = match:workspace w, border_size 0
# windowrule = match:workspace w, rounding 0

# ==============================================================================
# LAYER RULES
# ==============================================================================
layerrule = blur on, match:namespace rofi
layerrule = ignore_alpha 0.2, match:namespace rofi
layerrule = blur on, match:namespace waybar
layerrule = ignore_alpha 0.1, match:namespace waybar