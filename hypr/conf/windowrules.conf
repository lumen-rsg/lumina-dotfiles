# ==============================================================================
# WINDOW RULES (New Match/Effect Syntax)
# ==============================================================================

# --- Dwindle Layout Settings ---
dwindle {
    pseudotile = true
    preserve_split = true
}

# --- Terminal Opacity & Style ---
# Using 'override' to ensure system-wide active/inactive opacity settings 
# don't compound with these values.
windowrule = match:class kitty, opacity 0.85 override 0.85 override
windowrule = match:class Alacritty, opacity 0.85 override 0.85 override

# --- Utility & Floating Windows ---
windowrule = match:class pavucontrol, float on
windowrule = match:class pavucontrol, center on

windowrule = match:class nm-connection-editor, float on

# --- Media & Browser Tweaks ---
windowrule {
    match:title = ^Picture-in-Picture$
    float = on
    pin = on
}

# --- Smart Gaps / No Gaps Single ---
# Effects applied only when the window is tiled (not floating)
windowrule = match:float 0, gapsout 0
windowrule = match:float 0, gapsin 0
windowrule = match:float 0, border_size 0
windowrule = match:float 0, rounding 0

# ==============================================================================
# LAYER RULES (UI Components)
# ==============================================================================

# Rofi Launcher (Lumina Cyan/Purple theme support)
layerrule = blur on, match:namespace rofi
layerrule = ignore_alpha 0.2, match:namespace rofi

# Waybar Status Bar
layerrule = blur on, match:namespace waybar
layerrule = ignore_alpha 0.1, match:namespace waybar

# Notification Center (SwayNC)
layerrule = blur on, match:namespace swaync-control-center
layerrule = blur on, match:namespace swaync-notification-window
layerrule = ignore_alpha 0.1, match:namespace swaync-control-center
layerrule = ignore_alpha 0.1, match:namespace swaync-notification-window